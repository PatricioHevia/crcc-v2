<div class="tender-list-container p-6 bg-surface-50 dark:bg-surface-900 min-h-screen shadow-lg rounded-lg">
  <div class="header mb-6">
    <div class="flex justify-between items-start mb-4">
      <div>
        <h1 class="text-3xl font-bold text-surface-800 dark:text-white flex items-center gap-3">
          <i class="pi pi-file-edit text-primary"></i>
          {{ 'TENDERS.TITLE' | translate }}
        </h1>
        <p class="text-surface-600 dark:text-surface-300 mt-2">
          {{ 'TENDERS.SUBTITLE' | translate }}
        </p>
      </div>      <div class="flex gap-2">        
        <p-button 
          icon="pi pi-filter-slash" 
          [label]="'TENDERS.CLEAR_FILTERS' | translate"
          severity="secondary"
          size="small"
          (onClick)="clearFilters()"
          [disabled]="!hasActiveFilters()">
        </p-button>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filter-section grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 bg-surface-0 dark:bg-surface-800 rounded-lg border border-surface-200 dark:border-surface-700">
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium text-surface-700 dark:text-surface-200 flex items-center gap-2">
          <i class="pi pi-filter text-primary"></i>
          {{ 'TENDERS.FILTER_BY_STATUS' | translate }}
        </label>        <p-multiSelect 
          [options]="statusOptions()" 
          [ngModel]="selectedStatuses()"
          (ngModelChange)="selectedStatuses.set($event)"
          optionLabel="label" 
          optionValue="value"
          [placeholder]="'TENDERS.STATUS_PLACEHOLDER' | translate"
          [showClear]="true"
          styleClass="w-full">
        </p-multiSelect>
      </div>
      
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium text-surface-700 dark:text-surface-200 flex items-center gap-2">
          <i class="pi pi-cog text-primary"></i>
          {{ 'TENDERS.FILTER_BY_MODALITY' | translate }}
        </label>        <p-multiSelect 
          [options]="modalityOptions()" 
          [ngModel]="selectedModalities()"
          (ngModelChange)="updateSelectedModalities($event)"
          optionLabel="label" 
          optionValue="value"
          [placeholder]="'TENDERS.MODALITY_PLACEHOLDER' | translate"
          [showClear]="true"
          styleClass="w-full">
        </p-multiSelect>
      </div>

      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium text-surface-700 dark:text-surface-200 flex items-center gap-2">
          <i class="pi pi-tag text-primary"></i>
          {{ 'TENDERS.FILTER_BY_TYPE' | translate }}
        </label>
        <p-multiSelect 
          [options]="typeOptions()" 
          [ngModel]="selectedTypes()"
          (ngModelChange)="selectedTypes.set($event)"
          optionLabel="label" 
          optionValue="value"
          [placeholder]="'TENDERS.TYPE_PLACEHOLDER' | translate"
          [showClear]="true"
          styleClass="w-full">
        </p-multiSelect>
      </div>

      <div class="flex flex-col justify-end">
        <div class="text-sm text-surface-600 dark:text-surface-400 bg-surface-100 dark:bg-surface-700 p-3 rounded">
          <i class="pi pi-info-circle mr-2"></i>
          {{ 'TENDERS.SHOWING_COUNT' | translate:{ count: getDisplayTenders().length, total: tenderService.getAllTenders().length } }}
        </div>
      </div>
    </div>
  </div>

  @if (tenderService.loading()) {
  <div class="flex flex-col items-center justify-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
    <p class="text-surface-600 dark:text-surface-300 mt-4 flex items-center gap-2">
      {{ 'TENDERS.LOADING' | translate }}
    </p>
  </div>
  } @else if (tenderService.getAllTenders().length === 0) {
  <div class="text-center py-12">
    <div class="text-surface-400 mb-4">
      <i class="pi pi-file-edit text-6xl"></i>
    </div>
    <h3 class="text-lg font-medium text-surface-900 dark:text-white">{{ 'TENDERS.NO_TENDERS' | translate }}</h3>
    <p class="text-surface-500 dark:text-surface-400 mt-1">
      {{ 'TENDERS.NO_TENDERS_MESSAGE' | translate }}
    </p>
  </div>
  } @else if (getDisplayTenders().length === 0) {
  <div class="text-center py-12">
    <div class="text-surface-400 mb-4">
      <i class="pi pi-filter text-6xl"></i>
    </div>
    <h3 class="text-lg font-medium text-surface-900 dark:text-white">{{ 'TENDERS.NO_RESULTS' | translate }}</h3>
    <p class="text-surface-500 dark:text-surface-400 mt-1">
      {{ 'TENDERS.NO_RESULTS_MESSAGE' | translate }}
    </p>
  </div>
  } @else {
  <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    @for (tender of tenders(); track tender.id) {
    <div
      class="bg-surface-0 dark:bg-surface-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-surface-200 dark:border-surface-700 flex flex-col overflow-hidden group hover:scale-[1.02]">
      
      <!-- Imagen principal -->
      <div class="aspect-w-16 aspect-h-9 w-full bg-surface-200 dark:bg-surface-700 relative h-48">
        <img *ngIf="tender.imageUrl" [src]="tender.imageUrl" [alt]="'TENDERS.TENDER_IMAGE' | translate"
          class="object-cover w-full h-full group-hover:scale-105 transition-transform duration-300" />
        <div *ngIf="!tender.imageUrl" class="flex items-center justify-center w-full h-full text-surface-400">
          <i class="pi pi-image text-4xl"></i>
        </div>
        
        <!-- Badge de estado con mejor visibilidad -->
        <div class="absolute top-3 right-3">
          <p-tag 
            [value]="getStatusLabel(tender.tenderStatus)" 
            [severity]="getTagSeverity(tender.tenderStatus)"
            [icon]="getStatusIcon(tender.tenderStatus)"
            styleClass="shadow-lg !bg-opacity-100 dark:!bg-opacity-100">        
          </p-tag>
        </div>
      </div>

      <!-- Contenido principal -->
      <div class="flex-1 flex flex-col justify-between p-6 space-y-4">
        <div>
          <h3 class="text-xl font-bold text-surface-900 dark:text-white mb-2 line-clamp-2">
            {{ tender.name }}
          </h3>
          <p class="text-surface-600 dark:text-surface-300 text-sm line-clamp-3 mb-3">
            {{ tender.description }}
          </p>
        </div>

        <!-- Información principal -->
        <div class="space-y-3">
          <!-- Tipo de licitación -->
          <div class="flex items-center gap-2 mb-2">
            <i [class]="getTypeIcon(tender.tenderType)" class="text-primary text-lg"></i>
            <span class="text-sm font-semibold text-primary bg-primary-50 dark:bg-primary-900/20 px-2 py-1 rounded">
              {{ getTypeTranslationKey(tender.tenderType) | translate }}
            </span>
          </div>

          <!-- Moneda y Modalidad -->
          <div class="flex justify-between items-center">
            <div class="flex items-center gap-2">
              <i [class]="getCurrencyIcon(tender.tenderCurrency)" class="text-primary"></i>
              <span class="text-sm font-medium text-surface-700 dark:text-surface-200">
                {{ getCurrencyLabel(tender.tenderCurrency) }}
              </span>
            </div>
            
            <div class="flex items-center gap-2">
              <i [class]="getModalityIcon(tender.tenderModality)" class="text-surface-500"></i>
              <span class="text-xs text-surface-500 dark:text-surface-400">
                {{ getModalityTranslationKey(tender.tenderModality) | translate }}
              </span>
            </div>
          </div>

          <!-- Fechas -->
          <div class="space-y-2">
            @if (tender.tenderStartDate) {
            <div class="flex justify-between text-sm">
              <span class="text-surface-500 dark:text-surface-400 flex items-center gap-1">
                <i class="pi pi-calendar-plus text-xs"></i>
                {{ 'TENDERS.START_DATE' | translate }}
              </span>
              <span class="text-surface-900 dark:text-white font-medium">
                {{ tender.tenderStartDate.toDate() | date:'medium':undefined:lang() }}
              </span>
            </div>
            }
            
            @if (tender.awardDate) {
            <div class="flex justify-between text-sm">
              <span class="text-surface-500 dark:text-surface-400 flex items-center gap-1">
                <i class="pi pi-trophy text-xs"></i>
                {{ 'TENDERS.AWARD_DATE' | translate }}
              </span>
              <span class="text-surface-900 dark:text-white font-medium">
                {{ tender.awardDate.toDate() | date:'medium':undefined:lang()  }}
              </span>
            </div>
            }
            
            @if (tender.submissionDeadline) {
            <div class="flex justify-between text-sm">
              <span class="text-surface-500 dark:text-surface-400 flex items-center gap-1">
                <i class="pi pi-clock text-xs"></i>
                {{ 'TENDERS.SUBMISSION_DEADLINE' | translate }}
              </span>
              <span class="text-surface-900 dark:text-white font-medium">
                {{ tender.submissionDeadline.toDate() | date:'medium':undefined:lang()  }}
              </span>
            </div>
            }
          </div>
        </div>

        <p-divider></p-divider>
        
        <div>
          <p-button
            class="w-full"
            icon="pi pi-eye"
            [label]="'TENDERS.VIEW_DETAILS' | translate"
            severity="primary"
            [routerLink]="['/app/project', getCurrentProjectId(), 'tender', tender.id]">
          </p-button>
        </div>
      </div>
    </div>
    }
  </div>
  }